<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
    
  
  <link href="https://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css">







  

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/Angry_Birds.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/Angry_Birds.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Android,Kotlin,">










<meta name="description" content="Kotlin 简介Kotlin 是什么 Android 官方开发语言，100% 兼容 Java Kotlin-Js 前端开发 Kotlin-Jvm 服务端开发 Kotlin-Native 本地执行程序">
<meta name="keywords" content="Android,Kotlin">
<meta property="og:type" content="article">
<meta property="og:title" content="Kotlin学习笔记（一）">
<meta property="og:url" content="https://howshea.coding.me/2017/08/19/Kotlin学习笔记/index.html">
<meta property="og:site_name" content="Howshea">
<meta property="og:description" content="Kotlin 简介Kotlin 是什么 Android 官方开发语言，100% 兼容 Java Kotlin-Js 前端开发 Kotlin-Jvm 服务端开发 Kotlin-Native 本地执行程序">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-06-10T11:33:38.102Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kotlin学习笔记（一）">
<meta name="twitter:description" content="Kotlin 简介Kotlin 是什么 Android 官方开发语言，100% 兼容 Java Kotlin-Js 前端开发 Kotlin-Jvm 服务端开发 Kotlin-Native 本地执行程序">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://howshea.coding.me/2017/08/19/Kotlin学习笔记/">





  <title>Kotlin学习笔记（一） | Howshea</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?77435816125fc45b8d1e0f83cda162c2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Howshea</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">心里像是有一些话，我们先不讲</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://howshea.coding.me/2017/08/19/Kotlin学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Howshea">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Howshea">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Kotlin学习笔记（一）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-19T20:36:01+08:00">
                2017-08-19 20:36
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/" itemprop="url" rel="index">
                    <span itemprop="name">学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,188
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  19
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Kotlin-简介"><a href="#Kotlin-简介" class="headerlink" title="Kotlin 简介"></a>Kotlin 简介</h1><h2 id="Kotlin-是什么"><a href="#Kotlin-是什么" class="headerlink" title="Kotlin 是什么"></a>Kotlin 是什么</h2><ul>
<li>Android 官方开发语言，100% 兼容 Java</li>
<li>Kotlin-Js 前端开发</li>
<li>Kotlin-Jvm 服务端开发</li>
<li>Kotlin-Native 本地执行程序<a id="more"></a>
</li>
</ul>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    println(<span class="string">"Hello World"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="Boolean-类型"><a href="#Boolean-类型" class="headerlink" title="Boolean 类型"></a>Boolean 类型</h2><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> aBoolean:<span class="built_in">Boolean</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="Number-类型"><a href="#Number-类型" class="headerlink" title="Number 类型"></a>Number 类型</h2><ol>
<li><p>Int ( 32 位)</p>
 <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//十六进制</span></span><br><span class="line"><span class="keyword">val</span> hexInt: <span class="built_in">Int</span> = <span class="number">0xff</span></span><br><span class="line"><span class="comment">//二进制</span></span><br><span class="line"><span class="keyword">val</span> binInt: <span class="built_in">Int</span> = <span class="number">0</span>b000011</span><br><span class="line"><span class="comment">//kotlin 不支持直接表示 8 进制</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Long ( 64 位)</p>
 <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//未超过 Int 范围的数值需要加“L"</span></span><br><span class="line"><span class="keyword">val</span> aLong:<span class="built_in">Long</span> = <span class="number">123</span>L</span><br></pre></td></tr></table></figure>
</li>
<li><p>Float</p>
 <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//必须加 f</span></span><br><span class="line"><span class="keyword">val</span> aFloat:<span class="built_in">Float</span>=<span class="number">1.0</span>F</span><br><span class="line"><span class="comment">//1000.0</span></span><br><span class="line"><span class="keyword">val</span> anotherFloat:<span class="built_in">Float</span>=<span class="number">1E3</span>F</span><br><span class="line"><span class="comment">//负无穷</span></span><br><span class="line"><span class="keyword">val</span> negativeInfinity: <span class="built_in">Float</span> = <span class="built_in">Float</span>.NEGATIVE_INFINITY</span><br><span class="line"><span class="comment">//正无穷</span></span><br><span class="line"><span class="keyword">val</span> positivieInfinity: <span class="built_in">Float</span> = <span class="built_in">Float</span>.POSITIVE_INFINITY</span><br><span class="line"><span class="comment">//not a number</span></span><br><span class="line"><span class="keyword">val</span> nan:<span class="built_in">Float</span> = <span class="built_in">Float</span>.NaN</span><br></pre></td></tr></table></figure>
</li>
<li><p>Double</p>
 <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> aDouble:<span class="built_in">Double</span> = <span class="number">2.0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Short ( 16位 max : ( 2 ^ 15 ) - 1 == 32767 )</p>
</li>
<li>Byte ( 8位 max : 127)</li>
</ol>
<blockquote>
<p>Kotlin 里不区分装箱和非装箱类型</p>
</blockquote>
<h2 id="Char类型"><a href="#Char类型" class="headerlink" title="Char类型"></a>Char类型</h2><ul>
<li>占两个字节，表示一个 16 位的 Unicode 字符</li>
<li>用单引号</li>
<li>转义字符<blockquote>
<p>\t 制表符<br>\b 光标后退一个字符<br>\b 换行符<br>\r 光标回到行首<br>\‘ 单引号<br>\“ 双引号<br>\\ 反斜杠<br>\$ Kotlin支持$开头的字符串模板</p>
</blockquote>
</li>
</ul>
<h2 id="基本类型转换"><a href="#基本类型转换" class="headerlink" title="基本类型转换"></a>基本类型转换</h2><blockquote>
<p>Kotlin 不允许隐式转换</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> anInt: <span class="built_in">Int</span> = <span class="number">5</span></span><br><span class="line"><span class="keyword">val</span> aLong: <span class="built_in">Long</span> = anInt.toLong()</span><br></pre></td></tr></table></figure>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> string: String = <span class="string">"Hello"</span></span><br><span class="line"><span class="keyword">val</span> fromChars: String = String(charArrayOf(<span class="string">'H'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li>Kotlin中字符串比较<ul>
<li>使用 <code>==</code> 等价于 Java 中的 <code>equals()</code>，表示比较内容</li>
<li>使用 <code>===</code> 相当于 Java 的 <code>==</code> ，表示比较对象是否相同</li>
</ul>
</li>
<li><p>Kotlin支持字符串模板</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> arg1 = <span class="number">1</span></span><br><span class="line"><span class="keyword">val</span> arg2 = <span class="number">2</span></span><br><span class="line">println(<span class="string">"<span class="variable">$arg1</span> + <span class="variable">$arg2</span> = <span class="subst">$&#123;arg1 + arg2&#125;</span>"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Kotlin 支持原生字符串，使用三个双引号隔开，可以包含没有转义的、换行符和任意其他字符,在原生字符串中不支持转义，但是仍然支持字符串模板</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> rawString = <span class="string">"""</span></span><br><span class="line"><span class="string">  \t</span></span><br><span class="line"><span class="string">  \n</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><ul>
<li><p>构造方法允许 <strong>一个主构造方法</strong> 和 <strong>多个二级构造方法</strong> ，每个二级构造函数需要委托给主构造函数，或者通过委托另一个二级构造方法来间接委托</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Girl</span> <span class="keyword">constructor</span></span>()&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(character:String, appearance:String):<span class="keyword">this</span>()</span><br><span class="line">    <span class="keyword">constructor</span>(character: String, appearance: String, voice: String) : <span class="keyword">this</span>(character, appearance)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>只有一个构造方法时，<code>constructor()</code> 可以省略</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Girl</span></span>(character: String, appearance: String, voice: String)</span><br></pre></td></tr></table></figure>
</li>
<li><p>不需要用new关键字</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> aGirl:Girl = Girl(<span class="string">"温柔"</span>,<span class="string">"甜美"</span>,<span class="string">"动人"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以直接把主构造中的参数直接声明成为类的属性，在参数名前加上 <code>var</code> 或 <code>val</code> ,在创建类的时候，调用构造函数就直接把它们进行了初始化，这样就不用在类中单独声明类的属性了</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Girl</span> </span>(<span class="keyword">var</span> character: String, appearance: String, voice: String)</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">val</span> aGirl:Girl = Girl(<span class="string">"温柔"</span>,<span class="string">"甜美"</span>,<span class="string">"动人"</span>)</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">println(aGirl.character) <span class="comment">//right</span></span><br><span class="line">println(aGirl.appearance) <span class="comment">//wrong</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>init{}</code> 相当于构造方法的方法体</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Girl</span> </span>(character: String)&#123;</span><br><span class="line">    init &#123;</span><br><span class="line">        println(<span class="string">"new a girl ,she is <span class="variable">$character</span>)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="空类型安全"><a href="#空类型安全" class="headerlink" title="空类型安全"></a>空类型安全</h2><ul>
<li><p>返回值可为空的方法或者值可为空变量必须加上 <code>?</code> ,否则编译无法通过</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getName</span><span class="params">()</span></span>: String? &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>?.</code> 代表如果不为空就返回后面的值</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">println(name?.length)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>?:</code> 代表如果为空就返回后面的值</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> name = getName() ?: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果能确定值确实不为空,可以用 <code>!!</code> 声明</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> value: String? = <span class="string">"Hello World"</span></span><br><span class="line">println(value!!.length)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="智能类型转换"><a href="#智能类型转换" class="headerlink" title="智能类型转换"></a>智能类型转换</h2><ul>
<li><p>在已知为子类实例时，不需要像 Java 一样做强转，编译器会尽可能推导类型</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//getName() 是 Child 类里的方法</span></span><br><span class="line"><span class="keyword">val</span> parent: Parent = Child()</span><br><span class="line"><span class="keyword">if</span> (parent <span class="keyword">is</span> Child)</span><br><span class="line">    println(parent.name)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>as</code> 后面加上 <code>?</code> ,强制转换失败时返回空，而不会抛异常</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> parent: Parent = Parent()</span><br><span class="line"><span class="keyword">val</span> child: Child? = parent <span class="keyword">as</span>? Child</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><ul>
<li><p>导入类可以指定别名</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> net.println.kotlin.chapter2.市委.上海.市委书记 <span class="keyword">as</span> 茶水大王</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">val</span> 上海市委书记: 茶水大王 = 茶水大王(<span class="string">"李"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>包和路径可以不一致，但是最好不要这样写</p>
</li>
</ul>
<h2 id="区间-Range"><a href="#区间-Range" class="headerlink" title="区间 ( Range )"></a>区间 ( Range )</h2><ul>
<li>接口 <code>ClosedRange</code> 的子类,  <code>IntRange</code> 最常用</li>
<li><p>用 <code>..</code> 表示闭区间，用 <code>until</code> 表示半开区间</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> range:IntRange=<span class="number">0.</span><span class="number">.1024</span> <span class="comment">//[0,1024] ..操作符对应 rangeTo()方法</span></span><br><span class="line"><span class="comment">//val range:IntRange= 0.rangeTo(1024)</span></span><br><span class="line"><span class="keyword">val</span> range_exclusive:IntRange=<span class="number">0</span> until <span class="number">1024</span> <span class="comment">//[0,1024)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>用 <code>in</code> 或者 <code>contains()</code> 方法检查元素是否在区间内</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//println(range.contains(40))</span></span><br><span class="line">println(<span class="number">40</span> <span class="keyword">in</span> <span class="number">0.</span><span class="number">.100</span>) <span class="comment">//print true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>用 <code>in</code> 也可以迭代区间</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> range)&#123;</span><br><span class="line">    print(<span class="string">"<span class="variable">$i</span>,"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><ul>
<li><p>基本类型的数组使用 “ 类型名 + ArrayOf “ 系列方法构建，为了减少装箱和拆箱带来的开销</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> arrayOfInt:IntArray = intArrayOf(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>)</span><br><span class="line"><span class="keyword">val</span> arrayofChar:CharArray = charArrayOf(<span class="string">'H'</span>,<span class="string">'e'</span>,<span class="string">'l'</span>,<span class="string">'l'</span>,<span class="string">'o'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>其它类型使用 <code>arrayOf()</code></p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> arrayOfString:Array&lt;String&gt; = arrayOf(<span class="string">"我是"</span>,<span class="string">"码农"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>基本用法</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//return the array's length</span></span><br><span class="line">println(arrayOfInt.size)</span><br><span class="line"><span class="comment">//foreach</span></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> arrayOfInt)&#123;</span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//use [index] instead of get and set</span></span><br><span class="line">println(arrayOfString[<span class="number">1</span>])</span><br><span class="line">arrayOfString[<span class="number">1</span>] = <span class="string">"程序员"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//use some char insert a CharAarry and to be a String</span></span><br><span class="line"><span class="keyword">val</span> s = arrayofChar.joinToString(<span class="string">""</span>) <span class="comment">//return "Hello"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//切片</span></span><br><span class="line">println(arrayOfInt.slice(<span class="number">1.</span><span class="number">.3</span>)) <span class="comment">//return [3,5,7]</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="程序结构"><a href="#程序结构" class="headerlink" title="程序结构"></a>程序结构</h1><h2 id="变量和常量"><a href="#变量和常量" class="headerlink" title="变量和常量"></a>变量和常量</h2><ul>
<li><code>val</code> 表示常量, <code>var</code> 表示变量  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = getX() <span class="comment">//运行时常量</span></span><br><span class="line">const x = <span class="string">"..."</span> <span class="comment">//编译期常量</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li><p>无返回值是返回 <code>Unit</code>, 等同于 Java 的 <code>void</code>, 返回类型是 <code>Unit</code> 时, 可以忽略不写</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(arg1: <span class="type">Int</span>, arg2: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arg1 + arg2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>当函数体只是一个返回一个值的表达式时，可以简化写法：</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//The return type can be omitted</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(arg1: <span class="type">Int</span>, arg2: <span class="type">Int</span>)</span></span> = arg1 + arg2</span><br></pre></td></tr></table></figure>
</li>
<li><p>匿名函数，可以赋值给一个变量，除了没有名字，定义和使用和普通函数一样</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//The return type can be omitted</span></span><br><span class="line"><span class="keyword">val</span> intToLong = <span class="function"><span class="title">fun</span><span class="params">(x: <span class="type">Int</span>)</span></span> = x.toLong()</span><br><span class="line"><span class="comment">//use</span></span><br><span class="line">println(intToLong(<span class="number">4</span>))</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Lambda-表达式"><a href="#Lambda-表达式" class="headerlink" title="Lambda 表达式"></a>Lambda 表达式</h2><ul>
<li><p>Lambda 表达式其实也是函数的一种，写法是：{[参数列表]-&gt;[函数体，最后一行是返回值]}</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> sum = &#123; arg1: <span class="built_in">Int</span>, arg2: <span class="built_in">Int</span> -&gt; arg1 + arg2 &#125;</span><br><span class="line"><span class="keyword">val</span> intToLong = &#123; x: <span class="built_in">Int</span> -&gt; x.toLong() &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>无参：</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> printlnHello = &#123;</span><br><span class="line">    println(<span class="string">"Hello"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Lambda 表达式的返回值是最后一行的返回值</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//return Int</span></span><br><span class="line"><span class="keyword">val</span> sum = &#123; arg1: <span class="built_in">Int</span>, arg2: <span class="built_in">Int</span> -&gt;</span><br><span class="line">    println(<span class="string">"<span class="variable">$arg1</span> + <span class="variable">$arg2</span> = <span class="subst">$&#123;arg1 + arg2&#125;</span>"</span>)</span><br><span class="line">    arg1 + arg2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>变量名加 <code>()</code> 的方式是 <code>invoke()</code> 运算符</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> sum = &#123; arg1: <span class="built_in">Int</span>, arg2: <span class="built_in">Int</span> -&gt; arg1 + arg2 &#125;</span><br><span class="line">sum(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">//等同于：</span></span><br><span class="line">sum.invoke(<span class="number">1</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>forEach</code></p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">args.forEach (&#123; println(it)&#125;)</span><br><span class="line"><span class="comment">//如果最后一个参数是 Lambda 表达式, 花括号可以移到小括号的外面：</span></span><br><span class="line">args.forEach() &#123; println(it) &#125;</span><br><span class="line"><span class="comment">//小括号里什么的都没有，就可以删掉</span></span><br><span class="line">args.forEach &#123; println(it) &#125;</span><br><span class="line"><span class="comment">//println 接收的参数和 forEach 接收的参数相同,引用</span></span><br><span class="line">args.forEach (::println)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Lambda 表达式中 <code>return</code> 实际上不是中断这段表达式，而是中断它外部的函数</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//"The End" 不会被打印，因为 forEach 表达式终止了 main 函数</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    args.forEach &#123;</span><br><span class="line">        <span class="keyword">if</span> (it == <span class="string">"q"</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        println(it)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"The End"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果想在一个 Lamdba 表达式中中止当前这一次循环，可以为表达式加上标签，相当于 continue</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//显式标签</span></span><br><span class="line">args.forEach <span class="symbol">foreach@</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (it==<span class="string">"q"</span>) <span class="keyword">return</span><span class="symbol">@foreach</span></span><br><span class="line">    println(it)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//隐式标签 </span></span><br><span class="line">args.forEach &#123;</span><br><span class="line">    <span class="keyword">if</span> (it == <span class="string">"q"</span>) <span class="keyword">return</span><span class="symbol">@forEach</span></span><br><span class="line">    println(it)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>所有的函数的类型都是来自于 <code>Funtions.kt</code> 文件里的接口，从 <code>Function0</code> 到 <code>Function22</code>, 数字代表参数个数，所以 Kotlin 最多允许有22个参数的函数</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** A function that takes 0 arguments. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Function0</span>&lt;<span class="type">out R</span>&gt; : <span class="type">Function</span>&lt;<span class="type">R</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/** Invokes the function. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">invoke</span><span class="params">()</span></span>: R</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line"><span class="comment">/** A function that takes 22 arguments. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Function22</span>&lt;<span class="type">in P1, in P2, in P3, in P4, in P5, in P6, in P7, in P8, in P9, in P10, in P11, in P12, in P13, in P14, in P15, in P16, in P17, in P18, in P19, in P20, in P21, in P22, out R</span>&gt; : <span class="type">Function</span>&lt;<span class="type">R</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/** Invokes the function with the specified arguments. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">invoke</span><span class="params">(p1: <span class="type">P1</span>, p2: <span class="type">P2</span>, p3: <span class="type">P3</span>, p4: <span class="type">P4</span>, p5: <span class="type">P5</span>, p6: <span class="type">P6</span>, p7: <span class="type">P7</span>, p8: <span class="type">P8</span>, p9: <span class="type">P9</span>, p10: <span class="type">P10</span>, p11: <span class="type">P11</span>, p12: <span class="type">P12</span>, p13: <span class="type">P13</span>, p14: <span class="type">P14</span>, p15: <span class="type">P15</span>, p16: <span class="type">P16</span>, p17: <span class="type">P17</span>, p18: <span class="type">P18</span>, p19: <span class="type">P19</span>, p20: <span class="type">P20</span>, p21: <span class="type">P21</span>, p22: <span class="type">P22</span>)</span></span>: R</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="类成员-成员方法、成员变量"><a href="#类成员-成员方法、成员变量" class="headerlink" title="类成员 (成员方法、成员变量)"></a>类成员 (成员方法、成员变量)</h2><blockquote>
<p>属性初始化尽量在构造器中完成<br>无法在构造方法中初始化的，尝试降级为局部变量<br>var 用 lateinit 延迟初始化，val 用 lazy<br>可空类型谨慎用 null 直接初始化</p>
</blockquote>
<ul>
<li>方法就是类内部调用的函数，和函数只是叫法不同</li>
<li><p>Kotlin 的 getter/setter 默认已实现, (val 常量没有 setter）</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/* Kotlin 代码 */</span><br><span class="line">class A&#123;</span><br><span class="line">    var b =0</span><br><span class="line">&#125;</span><br><span class="line">/* 对应的 Java 代码 */</span><br><span class="line">public class A &#123;</span><br><span class="line">    private int b=0;</span><br><span class="line"></span><br><span class="line">    public int getB() &#123;</span><br><span class="line">        return b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setB(int b) &#123;</span><br><span class="line">        this.b = b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以复写 getter/setter，方法用 <code>field</code> 代替成员变量</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">0</span></span><br><span class="line">       <span class="keyword">get</span>() &#123;</span><br><span class="line">           println(<span class="string">"some one tries to get b"</span>)</span><br><span class="line">           <span class="keyword">return</span> field</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">set</span>(value)&#123;</span><br><span class="line">           println(<span class="string">"some one tries to set b"</span>)</span><br><span class="line">           field = value</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置 getter/setter 的访问权限，注意，get 方法的权限必须和该成员变量的访问权限保持一致,kotlin 中默认是 public 权限，不同于 Java 中默认是包访问权限</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b:<span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">set</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Kotlin 允许成员变量不初始化，用 <code>lateinit</code> 即可，但是要注意使用时必须要初始化该成员，否则程序会崩溃</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">lateinit</span> <span class="keyword">var</span> c: String</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">val</span> a = A()</span><br><span class="line">a.c = <span class="string">"Hello"</span></span><br><span class="line">println(a.c)</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于 val 类型的成员，可以使用委托懒加载，懒加载只有使用该成员时才会初始化</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">val</span> e: X <span class="keyword">by</span> lazy &#123;</span><br><span class="line">        println(<span class="string">"init X"</span>)</span><br><span class="line">        X()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="基本运算符"><a href="#基本运算符" class="headerlink" title="基本运算符"></a>基本运算符</h2><blockquote>
<p>运算符本质上是函数,通过对应的具名函数来定义</p>
</blockquote>
<ul>
<li>定义一个操作符  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Complex</span></span>(<span class="keyword">var</span> real:<span class="built_in">Double</span>,<span class="keyword">var</span> imageinary:<span class="built_in">Double</span>)&#123;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">plus</span><span class="params">(other:<span class="type">Complex</span>)</span></span>:Complex&#123;</span><br><span class="line">        <span class="keyword">return</span> Complex(real+ other.real,imageinary + other.imageinary)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">plus</span><span class="params">(other:<span class="type">Int</span>)</span></span>:Complex&#123;</span><br><span class="line">        <span class="keyword">return</span> Complex(real+ other,imageinary)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"<span class="variable">$real</span> + <span class="subst">$&#123;imageinary&#125;</span>i"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> c1 = Complex(<span class="number">3.0</span>,<span class="number">4.0</span>)</span><br><span class="line">    <span class="keyword">val</span> c2 = Complex(<span class="number">2.0</span>,<span class="number">7.6</span>)</span><br><span class="line"></span><br><span class="line">    println(c1 + c2) <span class="comment">//5.0 + 11.6i</span></span><br><span class="line">    println(c1 + <span class="number">8</span>) <span class="comment">//11.0 + 4.0i</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h2><h3 id="中缀表达式"><a href="#中缀表达式" class="headerlink" title="中缀表达式"></a>中缀表达式</h3><blockquote>
<p>只有一个参数，且用 <code>infix</code> 修饰的函数</p>
</blockquote>
<ul>
<li>示例  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span></span>&#123;</span><br><span class="line">    <span class="keyword">infix</span> <span class="function"><span class="keyword">fun</span> <span class="title">on</span><span class="params">(desk:<span class="type">Desk</span>)</span></span>:<span class="built_in">Boolean</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Desk</span></span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> (Book() on Desk())&#123;  &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="分支表达式"><a href="#分支表达式" class="headerlink" title="分支表达式"></a>分支表达式</h3><blockquote>
<p>返回值是每个分支的最后一句</p>
</blockquote>
<ul>
<li><p>if else 表达式</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> const <span class="keyword">val</span> DEBUG = <span class="number">1</span></span><br><span class="line"><span class="keyword">private</span> const <span class="keyword">val</span> USER = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> mode = <span class="keyword">if</span> (args.isNotEmpty() &amp;&amp; args[<span class="number">0</span>] == <span class="string">"1"</span>) DEBUG <span class="keyword">else</span> USER</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>when 表达式,加强版 switch</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> x = <span class="number">99</span></span><br><span class="line">    <span class="comment">//条件语句</span></span><br><span class="line">    <span class="keyword">when</span> (x) &#123;</span><br><span class="line">        <span class="number">102</span> -&gt; println(<span class="string">"right! <span class="variable">$x</span>"</span>)</span><br><span class="line">        <span class="keyword">in</span> <span class="number">1.</span><span class="number">.100</span> -&gt; println(<span class="string">"<span class="variable">$x</span> is in 1-100"</span>)</span><br><span class="line">        !<span class="keyword">in</span> <span class="number">1.</span><span class="number">.100</span> -&gt; println(<span class="string">"<span class="variable">$x</span> is not in 1-100"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//无自变量的 when，可以检查在 when 条件左边想要的任何事</span></span><br><span class="line">    <span class="keyword">val</span> mode =<span class="keyword">when</span>&#123;</span><br><span class="line">        args.isNotEmpty() &amp;&amp; args[<span class="number">0</span>]==<span class="string">"1"</span>-&gt; <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span> -&gt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(mode)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h2><ul>
<li><p>for 循环</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(arg <span class="keyword">in</span> args)&#123;</span><br><span class="line">    println(arg)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// args.withIndex() 返回一个迭代器</span></span><br><span class="line"><span class="keyword">for</span>(indexedValue <span class="keyword">in</span> args.withIndex())&#123;</span><br><span class="line">    println(<span class="string">"<span class="subst">$&#123;indexedValue.value&#125;</span> -&gt; <span class="subst">$&#123;indexedValue.index&#125;</span>"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//可以写成两个参数，是因为Data Class</span></span><br><span class="line"><span class="keyword">for</span>((index,value) <span class="keyword">in</span> args.withIndex())&#123;</span><br><span class="line">    println(<span class="string">"<span class="variable">$index</span> -&gt; <span class="variable">$value</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>while, do while 语句，与 Java 基本相同，break 跳出，continue 跳过</p>
</li>
<li>多层循环嵌套的终止结合标签使用  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="symbol">Outter@</span><span class="keyword">for</span>(...) &#123;</span><br><span class="line">    <span class="symbol">Inner@</span><span class="keyword">while</span>(i&lt;<span class="number">0</span>) &#123; <span class="keyword">if</span>(...) <span class="keyword">break</span><span class="symbol">@Outter</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="异常捕获-try-catch-finally"><a href="#异常捕获-try-catch-finally" class="headerlink" title="异常捕获 (try, catch, finally)"></a>异常捕获 (try, catch, finally)</h2><ul>
<li>try catch 语句也是表达式，可以有返回值.finally先执行，然后再返回结果  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> result = <span class="keyword">try</span> &#123;</span><br><span class="line">    args[<span class="number">0</span>].toInt()/args[<span class="number">1</span>].toInt()  <span class="comment">// 1 / 0</span></span><br><span class="line">&#125;<span class="keyword">catch</span> (e:Exception)&#123;</span><br><span class="line">    e.printStackTrace()</span><br><span class="line">    <span class="number">0</span></span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">    println(<span class="string">"finish"</span>)</span><br><span class="line">&#125;</span><br><span class="line">println(result)  <span class="comment">// print 0</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><h3 id="具名参数"><a href="#具名参数" class="headerlink" title="具名参数"></a>具名参数</h3><blockquote>
<p>给函数的实参附上形参</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(arg1: <span class="type">Int</span>, arg2: <span class="type">Int</span>)</span></span> = arg1 + arg2</span><br><span class="line">sum(arg1 = <span class="number">2</span>, arg2 = <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h3 id="变长参数"><a href="#变长参数" class="headerlink" title="变长参数"></a>变长参数</h3><ul>
<li><p>变长参数可以当数组一样使用</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(<span class="keyword">vararg</span> args: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">   <span class="keyword">for</span> (arg <span class="keyword">in</span> args)&#123;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>变长参数在 kotlin 中可以不放在最后一位，但是变长参数之后的参数需要使用具名参数</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">hello</span><span class="params">(double: <span class="type">Double</span>,<span class="keyword">vararg</span> ints:<span class="type">Int</span>,string: <span class="type">String</span>)</span></span>&#123;</span><br><span class="line">    println(double)</span><br><span class="line">    ints.forEach(::print)</span><br><span class="line">    println(<span class="string">"\n<span class="variable">$string</span>"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// * 运算符用于变长参数展开数组，目前只支持数组且不能重载</span></span><br><span class="line"><span class="keyword">val</span> array = intArrayOf(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>)</span><br><span class="line">hello(<span class="number">3.0</span>,*array,string = <span class="string">"kotlin"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>有歧义时要用具名参数指定</p>
</li>
</ul>
<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="接口和抽象类"><a href="#接口和抽象类" class="headerlink" title="接口和抽象类"></a>接口和抽象类</h2><ul>
<li><p>接口内变量不能初始化,而抽象类内的变量必须初始化</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">interfac B&#123;</span><br><span class="line">    <span class="comment">//相当于生成了一个 getJ 和 setJ 方法</span></span><br><span class="line">    <span class="keyword">var</span> j: <span class="built_in">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>不同于 Java，kotlin 的接口的方法可以有默认实现,如果有默认实现，实现类可以不用实现该方法</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> j:<span class="built_in">Int</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        println(j)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><ul>
<li>类和成员默认都是 <code>public</code> 和 <code>final</code> ，变为可被继承需要用 <code>open</code> 声明，或者是 <code>abstract</code></li>
<li>继承的成员需要使用 <code>override</code> 关键字</li>
<li><p><code>by</code> 接口代理，有点曲线救国地支持多继承的意思</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SeniorManager</span></span>(<span class="keyword">val</span> driver: Driver,<span class="keyword">val</span> writer: Writer):Driver <span class="keyword">by</span> driver,Writer <span class="keyword">by</span> writer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarDriver</span>:<span class="type">Driver&#123;</span></span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">drive</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(<span class="string">"开车"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PPTWriter</span>:<span class="type">Writer&#123;</span></span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">write</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(<span class="string">"写PPT"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Driver</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">drive</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Writer</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">write</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> driver = CarDriver()</span><br><span class="line">    <span class="keyword">val</span> writer = PPTWriter()</span><br><span class="line">    <span class="keyword">val</span> seniorManager = SeniorManager(driver,writer)</span><br><span class="line">    seniorManager.drive()</span><br><span class="line">    seniorManager.write()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>继承方法名重复问题，可以用 super 加模板的方式调用解决，但是方法的返回类型必须相同</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">x</span><span class="params">()</span></span>: <span class="built_in">Int</span> = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">x</span><span class="params">()</span></span>: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> : <span class="type">B</span>, <span class="type">C &#123;</span></span></span><br><span class="line">    <span class="keyword">var</span> y: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">x</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">when</span> &#123;</span><br><span class="line">            y &gt; <span class="number">0</span> -&gt; y</span><br><span class="line">            y &lt; <span class="number">-100</span> -&gt; <span class="keyword">super</span>&lt;B&gt;.x()</span><br><span class="line">            <span class="keyword">else</span> -&gt; <span class="keyword">super</span>&lt;C&gt;.x()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="类及其成员的可见性"><a href="#类及其成员的可见性" class="headerlink" title="类及其成员的可见性"></a>类及其成员的可见性</h2><ul>
<li><code>private, protected,internal,public</code></li>
<li><code>internal</code> 是同一 module 内可见</li>
</ul>
<h2 id="object"><a href="#object" class="headerlink" title="object"></a>object</h2><ul>
<li>和 class 其它都一样，只是只有一个实例，相当于直接实现了单例</li>
<li>在 java 代码中调用 kotlin 的 object 类：  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Kotlin 代码</span></span><br><span class="line"><span class="keyword">object</span> Player&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">printName</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Player"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Java 代码</span></span><br><span class="line">Player.INSTANCE.printName();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="伴生对象与静态成员"><a href="#伴生对象与静态成员" class="headerlink" title="伴生对象与静态成员"></a>伴生对象与静态成员</h2><ul>
<li>静态成员首先考虑使用包级函数、变量替代</li>
<li><p>伴生对象内的方法和变量，相当于 Java 中的静态方法和静态变量</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Latitude</span> <span class="keyword">private</span> <span class="keyword">constructor</span></span>(<span class="keyword">val</span> value: <span class="built_in">Double</span>) &#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">ofDouble</span><span class="params">(double: <span class="type">Double</span>)</span></span>: Latitude &#123;</span><br><span class="line">            <span class="keyword">return</span> Latitude(double)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> TAG: String = <span class="string">"Latitude"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    Latitude.ofDouble(<span class="number">1.1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果要在 Java 中一样调用，需要为伴生对象中的方法加上 <code>@JvmStatic</code> 注解，变量上加 <code>@JvmField</code> ，不加的话，调用方式略有区别：</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//不加注解</span></span><br><span class="line">Latitude.Companion.ofDouble(<span class="number">1.1</span>);</span><br><span class="line">System.out.println(Latitude.Companion.getTAG());</span><br><span class="line"><span class="comment">//加注解</span></span><br><span class="line">Latitude.ofDouble(<span class="number">1.1</span>);</span><br><span class="line">System.out.println(Latitude.TAG);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="方法重载"><a href="#方法重载" class="headerlink" title="方法重载"></a>方法重载</h2><ul>
<li>方法签名包含方法名和方法参数列表，不包括返回类型</li>
<li>方法重载与方法的返回类型无关</li>
</ul>
<h2 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h2><ul>
<li>默认参数的存在可以代替方法重载，一个最佳实践是，如果一个方法重载不能用默认参数代替，那这个重载很可能有隐藏的问题，所以避免定义关系不大的重载</li>
<li>在 Java 中调用 Kotlin 里的带默认参数的方法，本身不支持默认参数，需要在方法上加上 <code>@JvmOverloads</code> 注解</li>
</ul>
<h2 id="扩展成员"><a href="#扩展成员" class="headerlink" title="扩展成员"></a>扩展成员</h2><ul>
<li><p>为类添加扩展方法，避免写过多的工具类</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    print(<span class="string">"abc"</span>.multiply(<span class="number">3</span>))</span><br><span class="line">    <span class="comment">//print abcabcabc</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> String.<span class="title">multiply</span><span class="params">(int: <span class="type">Int</span>)</span></span>:String&#123;</span><br><span class="line">    <span class="keyword">val</span> stringBuilder = StringBuilder();</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span>.int)&#123;</span><br><span class="line">        stringBuilder.append(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stringBuilder.toString()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>操作符扩展</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    println(<span class="string">"abc"</span> * <span class="number">4</span>) <span class="comment">// print abcabcabcabc</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> String.<span class="title">times</span><span class="params">(int: <span class="type">Int</span>)</span></span>:String&#123;</span><br><span class="line">    <span class="keyword">val</span> stringBuilder = StringBuilder()</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">0</span> until int)&#123;</span><br><span class="line">        stringBuilder.append(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stringBuilder.toString()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//扩展方法在java中调用</span></span><br><span class="line">System.out.println(ExtendsKt.times(<span class="string">"abc"</span>, <span class="number">3</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>扩展属性, 注意扩展属性不能初始化，类似接口属性</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    println(<span class="string">"abc"</span>.a)</span><br><span class="line">    println(<span class="string">"abc"</span>.b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> String.a: String</span><br><span class="line">    <span class="keyword">get</span>() = <span class="string">"abc"</span></span><br><span class="line"><span class="keyword">var</span> String.b: <span class="built_in">Int</span></span><br><span class="line">    <span class="keyword">set</span>(value) &#123; &#125;</span><br><span class="line">    <span class="keyword">get</span>() = <span class="number">5</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="属性代理"><a href="#属性代理" class="headerlink" title="属性代理"></a>属性代理</h2><ul>
<li>定义方法：<br>  <code>val/var &lt;property name&gt;: &lt;Type&gt; by &lt;expression&gt;</code></li>
<li>代理者需要实现相应的 setValue/getValue 方法  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Delegates</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> hello <span class="keyword">by</span> X()</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> value:String?=<span class="literal">null</span></span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">getValue</span><span class="params">(thisRef:<span class="type">Any</span>?,property:<span class="type">KProperty</span>&lt;*&gt;)</span></span>:String &#123;</span><br><span class="line">        <span class="keyword">return</span> value?:<span class="string">""</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">setValue</span><span class="params">(thisRef: <span class="type">Any</span>?,property: <span class="type">KProperty</span>&lt;*&gt;,value:<span class="type">String</span>)</span></span>&#123;</span><br><span class="line">        println(<span class="string">"set <span class="subst">$&#123;property.name&#125;</span>: <span class="variable">$value</span>"</span>)</span><br><span class="line">        <span class="keyword">this</span>.value = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> delegates = Delegates()</span><br><span class="line">    delegates.hello = <span class="string">"hello"</span> <span class="comment">//print set hello: hello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="数据类"><a href="#数据类" class="headerlink" title="数据类"></a>数据类</h2><ul>
<li><p>dataclass 默认实现了 toString(),hashCode() 等方法</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Country</span></span>(<span class="keyword">val</span> id:<span class="built_in">Int</span>,<span class="keyword">val</span> name:String)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> china = Country(<span class="number">0</span>,<span class="string">"China"</span>)</span><br><span class="line">    println(china)</span><br><span class="line">    println(<span class="string">"<span class="subst">$&#123;china.component1()&#125;</span>,<span class="subst">$&#123;china.component2()&#125;</span>"</span>)</span><br><span class="line">    <span class="keyword">val</span>(id,name) = china</span><br><span class="line">    println(<span class="string">"<span class="variable">$id</span>,<span class="variable">$name</span>"</span>)</span><br><span class="line">    <span class="comment">/* print</span></span><br><span class="line"><span class="comment">    Country(id=0, name=China)</span></span><br><span class="line"><span class="comment">    0,China</span></span><br><span class="line"><span class="comment">    0,China</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>关于 component,不是dataclass独有的,普通的类也可以使用</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ComponentX</span> </span>&#123;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">component1</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello! we are "</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">component2</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">component3</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">component4</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> componentX= ComponentX()</span><br><span class="line">    <span class="keyword">val</span>(a,b,c,d) = componentX</span><br><span class="line">    println(<span class="string">"<span class="variable">$a</span><span class="variable">$b</span><span class="variable">$c</span><span class="variable">$d</span>"</span>)</span><br><span class="line">    <span class="comment">/* print</span></span><br><span class="line"><span class="comment">    Hello! we are 110</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>dataclass 没有无参构造器，也不能继承，可以使用 allOpen 和 noArg 插件来去除 final 和添加无参构造方法</p>
</li>
</ul>
<h2 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h2><ul>
<li><p>kotlin 中内部类默认是静态内部类，这与 Java 不同，如果要变成非静态，需要加上 inner 关键字</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outter</span></span>&#123;</span><br><span class="line">    inner <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner1</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> inner = Outter().Inner()</span><br><span class="line">    <span class="keyword">val</span> inner1 = Outter.Inner1()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>非静态内部类引用外部类成员，使用 <code>this@&lt;class name&gt;.&lt;property name&gt;</code> </p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outter</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> a:<span class="built_in">Int</span>=<span class="number">5</span></span><br><span class="line">    inner <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">            println(<span class="keyword">this</span><span class="symbol">@Outter</span>.a)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>kotlin 的匿名内部类允许继承和多实现，Java 里不可以</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outter</span></span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">OnClickListener</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">onClick</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> onClickListener: OnClickListener? = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> view = View()</span><br><span class="line">    <span class="comment">//这里的匿名内部类同时继承了 Outter 类</span></span><br><span class="line">    view.onClickListener = <span class="keyword">object</span>: Outter(),OnClickListener&#123;</span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onClick</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匿名内部类实际上是有名字的</p>
</li>
</ul>
<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><ul>
<li>kotlin 的枚举类允许添加构造方法和成员方法，但是枚举和其它成员要求用分号隔开  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">LogLevel</span></span>(<span class="keyword">val</span> id:<span class="built_in">Int</span>)&#123;</span><br><span class="line">    VERBOSE(<span class="number">1</span>),DEBUG(<span class="number">2</span>),INFO(<span class="number">3</span>),WARN(<span class="number">4</span>),ERROR(<span class="number">5</span>),ASSET(<span class="number">6</span>);</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"<span class="variable">$name</span>, <span class="variable">$ordinal</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="comment">//打印 DEBUG 的索引</span></span><br><span class="line">    println(LogLevel.DEBUG.ordinal)</span><br><span class="line">    <span class="comment">//遍历打印所有的枚举</span></span><br><span class="line">    LogLevel.values().map(::println)</span><br><span class="line">    <span class="comment">//获取实例</span></span><br><span class="line">    LogLevel.valueOf(<span class="string">"WARN"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="密封类"><a href="#密封类" class="headerlink" title="密封类"></a>密封类</h2><ul>
<li><p>子类可数的类，kotlin1.1之前其子类必须是内部类，1.1之后允许子类定义在类的外部，但是必须在同一文件里</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="class"><span class="keyword">class</span> <span class="title">PlayerCmd</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Play</span></span>(<span class="keyword">val</span> url: String, <span class="keyword">val</span> position: <span class="built_in">Long</span> = <span class="number">0</span>) : PlayerCmd()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Seek</span></span>(<span class="keyword">val</span> position: <span class="built_in">Long</span>) : PlayerCmd()</span><br><span class="line"><span class="keyword">object</span> Pause : PlayerCmd()</span><br><span class="line"><span class="keyword">object</span> Resume : PlayerCmd()</span><br><span class="line"><span class="keyword">object</span> Stop : PlayerCmd()</span><br></pre></td></tr></table></figure>
</li>
<li><p>与枚举不同的是：枚举类的每个枚举常量只存在一个实例，而密封类的一个子类可以有可包含状态的多个实例</p>
</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag"># Android</a>
          
            <a href="/tags/Kotlin/" rel="tag"># Kotlin</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/06/15/Kotlin和Java的编译期常量/" rel="next" title="Kotlin 和 Java 的编译期常量">
                <i class="fa fa-chevron-left"></i> Kotlin 和 Java 的编译期常量
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/09/11/Kotlin学习笔记二/" rel="prev" title="Kotlin学习笔记（二）">
                Kotlin学习笔记（二） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="Howshea">
            
              <p class="site-author-name" itemprop="name">Howshea</p>
              <p class="site-description motion-element" itemprop="description">这里躲着一个混账</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">23</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/howshea" target="_blank" title="Github">
                      
                        <i class="fa fa-fw fa-github"></i>Github</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://haipo-tao.lofter.com" target="_blank" title="Lofter">
                      
                        <i class="fa fa-fw fa-camera"></i>Lofter</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Kotlin-简介"><span class="nav-number">1.</span> <span class="nav-text">Kotlin 简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Kotlin-是什么"><span class="nav-number">1.1.</span> <span class="nav-text">Kotlin 是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hello-World"><span class="nav-number">1.2.</span> <span class="nav-text">Hello World</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据类型"><span class="nav-number">2.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Boolean-类型"><span class="nav-number">2.1.</span> <span class="nav-text">Boolean 类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Number-类型"><span class="nav-number">2.2.</span> <span class="nav-text">Number 类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Char类型"><span class="nav-number">2.3.</span> <span class="nav-text">Char类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基本类型转换"><span class="nav-number">2.4.</span> <span class="nav-text">基本类型转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串"><span class="nav-number">2.5.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类"><span class="nav-number">2.6.</span> <span class="nav-text">类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#空类型安全"><span class="nav-number">2.7.</span> <span class="nav-text">空类型安全</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#智能类型转换"><span class="nav-number">2.8.</span> <span class="nav-text">智能类型转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#包"><span class="nav-number">2.9.</span> <span class="nav-text">包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#区间-Range"><span class="nav-number">2.10.</span> <span class="nav-text">区间 ( Range )</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组"><span class="nav-number">2.11.</span> <span class="nav-text">数组</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#程序结构"><span class="nav-number">3.</span> <span class="nav-text">程序结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#变量和常量"><span class="nav-number">3.1.</span> <span class="nav-text">变量和常量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">3.2.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lambda-表达式"><span class="nav-number">3.3.</span> <span class="nav-text">Lambda 表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类成员-成员方法、成员变量"><span class="nav-number">3.4.</span> <span class="nav-text">类成员 (成员方法、成员变量)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基本运算符"><span class="nav-number">3.5.</span> <span class="nav-text">基本运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表达式"><span class="nav-number">3.6.</span> <span class="nav-text">表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#中缀表达式"><span class="nav-number">3.6.1.</span> <span class="nav-text">中缀表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分支表达式"><span class="nav-number">3.6.2.</span> <span class="nav-text">分支表达式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#循环语句"><span class="nav-number">3.7.</span> <span class="nav-text">循环语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#异常捕获-try-catch-finally"><span class="nav-number">3.8.</span> <span class="nav-text">异常捕获 (try, catch, finally)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参数"><span class="nav-number">3.9.</span> <span class="nav-text">参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#具名参数"><span class="nav-number">3.9.1.</span> <span class="nav-text">具名参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变长参数"><span class="nav-number">3.9.2.</span> <span class="nav-text">变长参数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#面向对象"><span class="nav-number">4.</span> <span class="nav-text">面向对象</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#接口和抽象类"><span class="nav-number">4.1.</span> <span class="nav-text">接口和抽象类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#继承"><span class="nav-number">4.2.</span> <span class="nav-text">继承</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类及其成员的可见性"><span class="nav-number">4.3.</span> <span class="nav-text">类及其成员的可见性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#object"><span class="nav-number">4.4.</span> <span class="nav-text">object</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#伴生对象与静态成员"><span class="nav-number">4.5.</span> <span class="nav-text">伴生对象与静态成员</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法重载"><span class="nav-number">4.6.</span> <span class="nav-text">方法重载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#默认参数"><span class="nav-number">4.7.</span> <span class="nav-text">默认参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#扩展成员"><span class="nav-number">4.8.</span> <span class="nav-text">扩展成员</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#属性代理"><span class="nav-number">4.9.</span> <span class="nav-text">属性代理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据类"><span class="nav-number">4.10.</span> <span class="nav-text">数据类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#内部类"><span class="nav-number">4.11.</span> <span class="nav-text">内部类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#枚举"><span class="nav-number">4.12.</span> <span class="nav-text">枚举</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#密封类"><span class="nav-number">4.13.</span> <span class="nav-text">密封类</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Howshea</span>
  <span class="post-meta-divider">|</span>
  <span>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.1.2/jquery.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/velocity/1.2.1/velocity.ui.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
